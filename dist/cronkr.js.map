{"version":3,"file":"cronkr.js","sources":["../lib/index.js"],"sourcesContent":["const SECOND = 0;\nconst MINUTE = 1;\nconst HOUR = 2;\nconst DAY_OF_MONTH = 3;\nconst MONTH = 4;\nconst DAY_OF_WEEK = 5;\nconst YEAR = 6;\nconst ORDER = [MONTH, DAY_OF_MONTH, DAY_OF_WEEK, HOUR, MINUTE, SECOND];\nconst UNIT = [\"초\", \"분\", \"시\", \"일\", \"월\", \"\", \"년\"];\nconst UNIT_LIMIT = [59, 59, 23, 31, 12, 7, 2099];\nconst MONTH_MAP = { JAN: 1, FEB: 2, MAR: 3, APR: 4, MAY: 5, JUN: 6, JUL: 7, AUG: 8, SEP: 9, OCT: 10, NOV: 11, DEC: 12 };\nconst DAY_MAP = { SUN: \"일요일\", MON: \"월요일\", TUE: \"화요일\", WED: \"수요일\", THU: \"목요일\", FRI: \"금요일\", SAT: \"토요일\", 1: \"일요일\", 2: \"월요일\", 3: \"화요일\", 4: \"수요일\", 5: \"목요일\", 6: \"금요일\", 7: \"토요일\" };\nconst NTH_MAP = { 1: \"첫번째\", 2: \"두번째\", 3: \"세번째\", 4: \"네번째\", 5: \"다섯번째\" };\n\nfunction getKor(token, type) {\n  if (\"*\" == token) {\n    if (type == DAY_OF_WEEK) {\n      return \"매\" + UNIT[DAY_OF_MONTH] + \" \";\n    } else {\n      return \"매\" + UNIT[type] + \" \";\n    }\n  }\n\n  if (\"?\" == token) {\n    return \"\";\n  }\n\n  if (type == MONTH) {\n    token = token.replace(/[A-Z]{3}/gi, function (matchStr) {\n      return MONTH_MAP[matchStr];\n    });\n  } else if (type == DAY_OF_MONTH) {\n    token = token.replace(\"LW\", \"마지막 평\");\n    token = token.replace(/[1-9]{1,2}W/gi, function (matchStr) {\n      return matchStr.substring(0, matchStr.length - 1) + \"일에서 가장 가까운 평\";\n    });\n    token = token.replace(\"L\", \"마지막\");\n  } else if (type == DAY_OF_WEEK) {\n    token = token.replace(/[A-Z]{3}/gi, function (matchStr) {\n      return DAY_MAP[matchStr];\n    });\n    token = token.replace(/([1-7])L/gi, function (matchStr) {\n      return \"마지막 \" + DAY_MAP[matchStr[0]];\n    });\n    token = token.replace(/[1-7]#[1-5]/g, function (matchStr) {\n      return NTH_MAP[matchStr[2]] + \" \" + DAY_MAP[matchStr[0]];\n    });\n    token = token.replace(/[1-7]/g, function (matchStr) {\n      return DAY_MAP[matchStr];\n    });\n  }\n\n  token = token.replace(/(\\d+)\\/(\\d+)/g, function (matchStr) {\n    const incFlag = Number(matchStr[2]);\n    const incStr = [];\n    let start = Number(matchStr[0]);\n\n    while (start <= UNIT_LIMIT[type] && incStr.length < 4) {\n      incStr.push(start);\n      start += incFlag;\n    }\n\n    if (start <= UNIT_LIMIT[type]) {\n      incStr.push(\"…\");\n    }\n\n    return incStr.join(\",\");\n  });\n\n  return token + UNIT[type] + \" \";\n}\n\nexport function desc(cronExpr) {\n  const exprArr = cronExpr.split(/[ \\t]/);\n  const resultArr = [];\n  let startOrder = 0;\n\n  if (exprArr.length < YEAR || exprArr.length > YEAR + 1) {\n    return null;\n  }\n\n  if (\"?\" != exprArr[DAY_OF_MONTH] && \"?\" != exprArr[DAY_OF_WEEK]) {\n    return null;\n  }\n\n  if (exprArr.length == YEAR + 1 && exprArr[YEAR].indexOf(\"*\") == -1) {\n    resultArr.push(getKor(exprArr[YEAR], YEAR));\n  }\n\n  if (exprArr[MONTH].indexOf(\"*\") != -1 && ((exprArr[DAY_OF_MONTH] == \"*\" && exprArr[DAY_OF_WEEK] == \"?\") || (exprArr[DAY_OF_MONTH] == \"?\" && exprArr[DAY_OF_WEEK] == \"*\"))) {\n    startOrder++;\n\n    if (exprArr[HOUR].indexOf(\"*\") != -1) {\n      startOrder += 2;\n\n      if (exprArr[MINUTE].indexOf(\"*\") != -1) {\n        startOrder++;\n\n        if (exprArr[SECOND].indexOf(\"*\") != -1) {\n          startOrder++;\n        }\n      }\n    }\n  }\n\n  for (startOrder; startOrder < ORDER.length; startOrder++) {\n    resultArr.push(getKor(exprArr[ORDER[startOrder]], ORDER[startOrder]));\n  }\n\n  return resultArr.join(\"\").trim();\n}\n"],"names":[],"mappings":"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"}